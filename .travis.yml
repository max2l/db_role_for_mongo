python:
- '3.6'
install:
- sudo pip install ansible==2.3.0 molecule apache-libcloud==0.20.1 pycrypto testinfra==1.11.1
  six==1.10.0 pylib
env:
  matrix:
  - GCE_CREDENTIALS_FILE="$(pwd)/credentials.json"
  global:
  - secure: MheHD/9BpQ+HjBy594YS5P0jUh3XVKSkQ8R6riqaq4f5aAGWgREHrO2+jnGSyqTI/rCFTNYXuZ27m4blHzzMggZ0y/TnvdJpeCZ+HY0rabjOtRcXoRbL1rauu8P0h9BiZgF7k+j2xCrZnt7JtKX1wt/ZaYFzkU8wxhVcuuYmDlkfd55gz7V8OC00XB+jL/duzgSm/01jJVT3Ua0KXfIouNtvKkbPSoBIslEk+Wx2uXJi9aRDPxPORqFnIe7HTx2VbZ0Bqj9Q+OWoZt5CqtjMn1E5J1ybC6YxV/9LKpf0vW/QmGPjAxidWpgLjQKCG/j3Atb/tZgKeGtxHiYhOTdKj3MdZ0lds+SrMJGnDgkPARzeAqWKMZHN6gpcML9Q1FjuxA/P6pKHfdr1pP0S/aW47V03aPZc3ZNiw1nSA1VS1DheD/w98+5v6NDoRFAJBgn/jZSNfG/+lXYwO1K+huEmJE7Rl9K24ia9jZe1IRXNMR6ziXQr5cS3FIlXPAToeUN5UuuKi91q9STGSOnWf3Sihm80YqgsTt6dwEuovixa6f0gmtMgUkZRbChGcT8jDNP07XLmfHpH1QLJY5tQzZYT9u4nAPZgA89buRWIyJHMMimTrtrD7zoIzKIQ1VJ777giVE1i0tGo21IYZzk0PZSPQPGQwUVP8e+P1UkcFbtZeJ4=
  - secure: BgLHJ0k6DF3uaSeur+C+90XipQVTiQUKZr+TWADBe1he9W8QHjOZufdeehZ8bEgygaqAOIAh125X4WRrq814RfhmTiAdTcoBpHuw8Bz50S3irnuRPlOV0Cq09HEKgLkNDiM0M29fvulAnRdDwan+phTRLvDkEcwCcEUphW0mf3kq1cRrnZYWwdg6P6PF+YKjhYLG7dnFSIRolvbNL/+gF52BWobCWvCUhuI1yx56Dx4V2qkRCis6Tse5pk/45OApVNzX5PFo5hL6YEWx92F/bV1+4PcvKnAG3y4SS7B0q9BqjwM6WUSg1XZ4pJxmeacU8TzKPaSnlIA2Ibpz+6ENYt8KMVT6ijRZQTyNxCzJ50UKQUG9+zHLDNrSypYQ5SkSbPOyMV7LLfGBkqr8jWCBojFHkrRDCUznDGh3k7tjGNqe6hUYlb0zEFFGqMcOnrf0+8/OB1o1cnQ3vgnzpkKgT2W3FieVdqbYH5YJU2DleBx9U+Gi6QzeLBrpgOhGIXrxvWsvXHEiZL98n6wRObRcUJgFSpBKhbWKKHMLgKCMVAAQbXUbvPU+qPogyQhNYfnI0LsN37O8DAm36oOSkl4r25zn+UGV3wkyxKa3FuiQX4Sy8Ni60cxIM21Kfwo+k6jWaXY9l430m7/KWoENqLPvkUQ8hBbfO41ZLKTxGR7lEiA=
  - secure: P0/Tu388xjFNok3Jb1LYdFNTCKKOgadok/Nb8YHx1kJ8l2fXzpHIWywOhtjcFI13rK5BTaduFs1SwZEvJamjJ3cUkAI6OqSeOgpOuMFDmCLTbqB1azkw0GcZHasVoAUNFdOLbg5+O9C4XVD4yeGCdmP0/Wml6HjzQCEdSIqO8zwThcMS2DDJzldBIiKy/n/eYs7fxxU1puPDzrRsmQNXukJNNviNphRbd6emgwAMDwmdVVYZ4mG7FTUN2bMWtteFe5R6sIE+bZvNd2eGNQh9J40xkQfQvs5WJPK+BFb1rjbv81VQOflin1ilwsalYrMVUIOiRGxd3pYM0OV2/HgglOeAvzLFnECZW6mL9JCgL7Jjoefo5Y3MC9YK5BeUY2oszsHwfsXbbWrJsBrIGzRo6Pu08ZXsXB0/R2NORIs2eTfE9q13RO4vsoqC26BMSTkn7f0yUchLF6+jOhpIXw/GZa4suw8uj00ZhDhq/EXrwHMqYYuIUIBJxnlEpIUhEpDmMrD/1Ohkn5GY3EjjScyQa687fNxuRJlWC9I2I7P4qa3fI9F0WvoH5YUfBPLaXyyO3DPUYJPFZr3jDl3YKDxygzBeJGKH23kFJ2jGKo916bVgBd9mTRxJofdlaUnHq5juSyQbNZNsZCemCwH2vN8N7ottv+d84v8aOX8vqJlVIY0=
script:
- molecule create
- molecule converge
- molecule verify
after_script:
- molecule destroy
before_install:
- openssl aes-256-cbc -K $encrypted_599ed6bfae42_key -iv $encrypted_599ed6bfae42_iv
  -in secrets.tar.enc -out secrets.tar -d
- tar xvf secrets.tar
- mv google_compute_engine /home/travis/.ssh/
- chmod 0600 /home/travis/.ssh/google_compute_engine
notifications:
  slack:
    secure: F3f5mhF9yGZVaiuof8gBcqHIUh0Gx5hfDenKZ5sNu0WNJEB9zrB79D5MEPFrsBOXQr586DN4Pbo+hCYP4ZxGSp12nDAwoYkitFIaq4CYp3s+jWrj4Pz8Zw3Hl1+yuJj9EyqS3N7Fa47hBxykbFrqzC+Y7NFJ6fC/VSZE8qltfUuBLmT+NZYOFd1ZYd+3KFPDtplnwcwnaHogA97VHHoFw7qvPKDUz/PKMWvyp+l/h0Nge2ZtPGD5EfbIEqK6dTPZh8ggLwAzUG+GCJFhIHTVInZaPjd6o7zn3/DgmMo8sLwlTXw8drJ15jGqpt3940GKH4XKSR/BCemEKH3dqbFO+USONg90OLd9nlTXTMzoqy3aDfJGTt3kb9IShxcwxc776MazQdLcl+HMVrl/aL+SpPCznGbR4P02oEc5d1R2KejaRynh1QlPdkho8Bb2Ris6rdYtHRdTSClINnZl//Wbkc8KrJeNaWAOxAAbws6RrAbTl99tNb0J6Gd7fBqIzKXQUTlyf/0LeTWCRZhRs/ciI5/eEq2YWmHHq91FcNWCvrXIuILYX2CQXeK27YhGFfr93KBsMWdykml/A8+R27q0wrWj08R4J9huP2ITCcsYJ3FHeQ2aFN+QvLifwN6BzFRDE3p4IVoKFerSuFl6XsTn5gjMMn9MOCKpeP7UUNb+Tds=
